function mToHm(e){return{hrs:Math.floor(e/60),min:e%60}}function getLineProgressCoordinates(e,t,r,n){return px=Math.round(t+(r-t)*n),pt=e.getPointAtLength(px),{x:Math.round(pt.x),y:Math.round(pt.y)}}function setActivePoint(e,t,r){pt=e.getPointAtLength(r),t.style.cx=pt.x,t.style.cy=pt.y,t.style.transformOrigin=pt.x+"px "+pt.y+"px"}function travelAnimate(e,t){function r(t){n||(n=t);let f=t-n,d=(f/o).toPrecision(2);d=-(Math.cos(Math.PI*d)-1)/2;let p=mToHm(Math.round(i+a*d)),y=getLineProgressCoordinates(__path,l,m,d);__hours.innerHTML=p.hrs,__minutes.innerHTML=p.min,__ferries.innerHTML=Math.round(e.ferries+c*d),__distance.innerHTML=Math.round(e.distance+u*d),__path.style.strokeDashoffset=Math.round(e.offset+s*d)+"px",__point.style.transform=`translate(${y.x}px, ${y.y}px)`,f<o&&window.requestAnimationFrame(r)}let n=null,s=t.offset-e.offset,o=Math.max(Math.abs(s)/route[0].offset*routeTime,1500),a=(new Date(t.timestamp)-new Date(e.timestamp))/6e4,i=(new Date(e.timestamp)-new Date(route[0].timestamp))/6e4,u=t.distance-e.distance,c=t.ferries-e.ferries,m=route[0].offset-t.offset,l=route[0].offset-e.offset;window.requestAnimationFrame(r)}function travelTo(e){let t=route.findIndex(t=>t.name==e);t!=travelStatus&&(travelAnimate(route[travelStatus],route[t]),travelStatus=t)}function toggleDark(e){document.body.classList.toggle("dark");let t=document.body.classList.contains("dark");e.innerHTML=t?"Bli lys â˜€ï¸":"GjÃ¸r mÃ¸rk ðŸŒ™",e.parentNode.querySelector("span").innerHTML=t?"Hei! Du leser nÃ¥ artikkelen i mÃ¸rk utgave. Synes du det er rart, kan du endre til lys utgave.":"Hei! Du leser nÃ¥ artikkelen i lys utgave. Ble det for kjedelig, endre til mÃ¸rk!"}const appearElements=document.querySelectorAll(".appear"),appearObs=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.target;e.isIntersecting&&t.classList.add("appeared")})});appearElements.forEach(e=>{appearObs.observe(e)});const videos=document.querySelectorAll("video"),videoObs=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.target;e.isIntersecting||t.paused?e.isIntersecting&&t.paused&&t.play():t.pause()})},{threshold:.6});videos.forEach(e=>{videoObs.observe(e)});const route=[{name:"Trykk",offset:980,distance:0,timestamp:"2022-08-15T14:51Z",ferries:0},{name:"I trykken",offset:980,distance:0,timestamp:"2022-08-15T14:51Z",ferries:0},{name:"Avgang",offset:980,distance:0,timestamp:"2022-08-15T19:08Z",ferries:0},{name:"Halsa ferjekai",offset:662,distance:103,timestamp:"2022-08-15T20:40Z",ferries:0},{name:"Molde ferjekai",offset:433,distance:177,timestamp:"2022-08-15T22:45Z",ferries:1},{name:"SolavÃ¥gen ferjekai",offset:188,distance:200,timestamp:"2022-08-16T00:40Z",ferries:2},{name:"Ã˜rsta sentrum",offset:61,distance:296,timestamp:"2022-08-16T02:02Z",ferries:3},{name:"Abonnent",offset:0,distance:316,timestamp:"2022-08-16T02:33Z",ferries:3}];let travelStatus=0,routeTime=8e3,__mapContainer=document.querySelector(".route-map-container"),__info=document.querySelector(".route-info"),__path=document.querySelector(".route-map-route"),__point=document.querySelector(".route-point-indicator"),__hours=document.querySelector(".route-hours"),__minutes=document.querySelector(".route-minutes"),__ferries=document.querySelector(".route-ferries"),__distance=document.querySelector(".route-distance");var sectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.target,r=t.parentNode;if(e.isIntersecting&&r.dataset.section){let e=r.dataset.section;r.classList.add("active"),r.querySelector(".route-map-target").append(__mapContainer),r.querySelector(".route-info-target").append(__info),setTimeout(()=>{travelTo(e)},1e3)}else r.classList.remove("active")})},{threshold:.1});const sections=document.querySelectorAll(".route-trigger");sections.forEach(e=>sectionObserver.observe(e));